# -import time
import random
import requests
import json
class PC:
    def send_data(self, data):
        # 模擬PC發送資料給OM2M中間節點
        print(f"PC sending data to OM2M node: {data}")
        om2m_node.receive_data(data)

class OM2MNode:
    def receive_data(self, data):
        # 模擬OM2M中間節點接收資料，進行轉換
        print("OM2M node receiving data from PC...")
        pythonic_device.process_data(data)

class PythonicDevice:
    def process_data(self, data):
        # 模擬Pythonic設備處理資料
        print(f"Pythonic device processing data: {data}")
        # 將資料轉換為ASCII格式
        ascii_data = self.convert_to_ascii(data)
        print(f"ASCII data generated by Pythonic device: {ascii_data}")

    def convert_to_ascii(self, data):
        # 模擬資料轉換為ASCII格式的過程
        # 在這裡你可以根據實際需求進行資料轉換
        ascii_data = ''.join(str(ord(char)) for char in data)
        return ascii_data

pc = PC()
om2m_node = OM2MNode()
pythonic_device = PythonicDevice()

# 模擬資料產生與傳送
for _ in range(5):  # 假設模擬5次資料傳送
    # 生成亂數資料
    random_data = ''.join(random.choice('ABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890') for _ in range(10))
    pc.send_data(random_data)
    time.sleep(1)  # 模擬每秒傳送一次資料
class PythonicDevice:
    def process_data(self, data):
        print(f"Pythonic device processing data: {data}")
        ascii_data = self.convert_to_ascii(data)
        print(f"ASCII data generated by Pythonic device: {ascii_data}")

        # 將資料傳送至伺服器的REST API
        api_url = "http://your_server/api/store_data"
        payload = {"data": ascii_data}
        response = requests.post(api_url, data=json.dumps(payload), headers={"Content-Type": "application/json"})

        if response.status_code == 200:
            print("Data successfully sent to REST API.")
        else:
            print(f"Failed to send data. Status code: {response.status_code}")

    def convert_to_ascii(self, data):
        ascii_data = ''.join(str(ord(char)) for char in data)
        return ascii_data
